import os

def generate_c_target():
    ip_cs = set([])
    if not os.path.exists('out/nmap'):
        os.mkdir('out/nmap')
    with open('out/ip.target') as f:
        for l in f:
            l = l.strip()
            ips = l.split(',')
            for ip in ips:
                if ip == '0.0.0.0':
                    continue
                if ip.startswith('10.'):
                    continue 
                for n in ["172.{0}.".format(i) for i in range(16,32)]:
                    if ip.startswith(n):
                        continue
                ip_cs.add(".".join(ip.split('.')[0:3]))

    with open('out/nmap/ip_c.target', 'w') as cf:
        for ip_c in ip_cs:
            cf.write('{}.0/24\n'.format(ip_c))

generate_c_target()